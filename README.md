# CS2 Server Manager | CS2 æœåŠ¡å™¨ç®¡ç†å™¨

[English](#english) | [ä¸­æ–‡](#chinese)

---
## âš ï¸ é‡è¦ç½‘ç»œè¦æ±‚ï¼ˆéƒ¨ç½²å‰å¿…è¯»ï¼‰

<div align="center">
  <strong>ä¸ºäº† 100% æˆåŠŸéƒ¨ç½²ï¼Œè¯·ç¡®ä¿ä½ çš„ç½‘ç»œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</strong>
</div>

| è¦æ±‚é¡¹                 | è¯´æ˜                                                                 |
|-----------------------|----------------------------------------------------------------------|
| Steam å®˜æ–¹æœåŠ¡å™¨      | å¿…é¡»èƒ½æ­£å¸¸è®¿é—® `steampowered.com` å’Œ Steam å†…å®¹æœåŠ¡å™¨ï¼ˆä¸‹è½½æ¸¸æˆæ–‡ä»¶ç”¨ï¼‰ |
| GitHub                | å¦‚éœ€è¦å®‰è£…æ’ä»¶æ¡†æ¶ éœ€è¦èƒ½æ­£å¸¸è®¿é—® `github.com` å’Œ `githubusercontent.com`ï¼ˆä¸‹è½½æ’ä»¶æ¡†æ¶ CounterStrikeSharp ç­‰ï¼‰ |
| å½“å‰æ— ä¸­å›½åŠ é€Ÿé•œåƒ     | é¡¹ç›®æš‚æœªæä¾›å›½å†…é•œåƒï¼Œå»ºè®®è‡ªè¡Œè§£å†³                        |


# ä¸ä¼šä½¿ç”¨ï¼ŸèŠ±è´¹ 2 åˆ†é’Ÿçœ‹çœ‹è§†é¢‘ â†“

## ğŸš€ è¶…ç®€å•éƒ¨ç½²ï¼ˆ2åˆ†é’Ÿä¸Šæ‰‹ï¼‰

[![](https://img.youtube.com/vi/8GksFZHmO0c/maxresdefault.jpg)](https://youtu.be/8GksFZHmO0c)

## âš™ï¸ æ“ä½œå’Œç®¡ç†ï¼ˆå®Œæ•´åŠŸèƒ½æ¼”ç¤ºï¼‰

[![](https://img.youtube.com/vi/PPzykUZmNy0/maxresdefault.jpg)](https://youtu.be/PPzykUZmNy0)

> ç‚¹å›¾ç‰‡ç«‹å³æ’­æ”¾ Â·  2 åˆ†é’Ÿå­¦ä¼šå…¨éƒ¨æ“ä½œ


<a name="chinese"></a>
## ğŸ“– ä¸­æ–‡è¯´æ˜

### ç®€ä»‹

ä¸€ä¸ªåŸºäº **FastAPI + Redis + MySQL** æ„å»ºçš„ç°ä»£åŒ– CS2 (Counter-Strike 2) æœåŠ¡å™¨ç®¡ç†å™¨ã€‚é€šè¿‡ SSH è¿œç¨‹ç®¡ç†å¤šä¸ªæœåŠ¡å™¨ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²ã€å¯åŠ¨ã€åœæ­¢ç­‰æ“ä½œï¼Œè®©æœåŠ¡å™¨ç®¡ç†å˜å¾—ç®€å•é«˜æ•ˆï¼

### âœ¨ ä¸»è¦ç‰¹æ€§

- âœ… **å¼‚æ­¥æ¶æ„**: å®Œå…¨ä½¿ç”¨ async/await å®ç°é«˜æ€§èƒ½å¼‚æ­¥æ“ä½œ
- ğŸš€ **å¤šæœåŠ¡å™¨ç®¡ç†**: æ”¯æŒåŒæ—¶ç®¡ç†å¤šä¸ª CS2 æœåŠ¡å™¨
- ğŸ”— **SSH è¿æ¥æ± **: åŒæœåŠ¡å™¨è¿æ¥å¤ç”¨ï¼Œå¤§å¹…é™ä½ SSH è¿æ¥å¼€é”€ï¼ˆæ€§èƒ½æå‡é«˜è¾¾ 90%ï¼‰([æŸ¥çœ‹æ–‡æ¡£](docs/SSH_CONNECTION_POOLING.md))
- ğŸ‘¥ **ç”¨æˆ·è®¤è¯**: JWT ä»¤ç‰Œè®¤è¯ï¼Œç”¨æˆ·åªèƒ½ç®¡ç†è‡ªå·±åˆ›å»ºçš„æœåŠ¡å™¨
- ğŸ”‘ **API å¯†é’¥**: æ”¯æŒ API å¯†é’¥è®¤è¯ï¼Œæ–¹ä¾¿ç”¨æˆ·æ§åˆ¶æœåŠ¡å™¨è€Œæ— éœ€å¯†ç äº¤æ¢ ([æŸ¥çœ‹æ–‡æ¡£](docs/API_KEY_USAGE.md))
- ğŸ” **SSH è¿æ¥**: æ”¯æŒå¯†ç å’Œå¯†é’¥æ–‡ä»¶ä¸¤ç§è®¤è¯æ–¹å¼
- ğŸ“¦ **è‡ªåŠ¨éƒ¨ç½²**: é€šè¿‡ SSH è‡ªåŠ¨éƒ¨ç½² CS2 æœåŠ¡å™¨
- ğŸ® **æœåŠ¡å™¨æ§åˆ¶**: å¯åŠ¨ã€åœæ­¢ã€é‡å¯æœåŠ¡å™¨
- ğŸ”„ **è‡ªåŠ¨é‡å¯ä¿æŠ¤**: æœåŠ¡å™¨å´©æºƒæ—¶è‡ªåŠ¨é‡å¯ï¼Œå…·æœ‰å´©æºƒå¾ªç¯ä¿æŠ¤æœºåˆ¶ ([æŸ¥çœ‹æ–‡æ¡£](docs/AUTO_RESTART_GUIDE.md))
- ğŸ”” **å®æ—¶çŠ¶æ€ä¸ŠæŠ¥**: æœåŠ¡å™¨é€šè¿‡ API å‘ç®¡ç†ç«¯ä¸ŠæŠ¥å´©æºƒã€é‡å¯ç­‰äº‹ä»¶
- ğŸ”Œ **æ’ä»¶æ¡†æ¶å®‰è£…**: ä¸€é”®å®‰è£… Metamod:Source å’Œ CounterStrikeSharpï¼Œæ”¯æŒæ‰¹é‡å®‰è£…å’Œæ›´æ–°
- ğŸ“Š **çŠ¶æ€ç›‘æ§**: å®æ—¶æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
- ğŸ”´ **WebSocket å®æ—¶æ›´æ–°**: éƒ¨ç½²è¿‡ç¨‹å®æ—¶æŸ¥çœ‹ SSH çŠ¶æ€å’Œè¾“å‡º
- ğŸ’¾ **Redis ç¼“å­˜**: ä½¿ç”¨ Redis ç¼“å­˜æœåŠ¡å™¨çŠ¶æ€
- ğŸ“ **æ“ä½œæ—¥å¿—**: è®°å½•æ‰€æœ‰éƒ¨ç½²å’Œæ“ä½œå†å²
- ğŸ³ **Docker æ”¯æŒ**: æä¾› Docker Compose å¿«é€Ÿéƒ¨ç½²ä¾èµ–
- ğŸ¨ **ç°ä»£åŒ– Web ç•Œé¢**: åŸºäº Bootstrap 5 + Alpine.js çš„å“åº”å¼ç•Œé¢ï¼Œæ‰€æœ‰èµ„æºå®Œå…¨æœ¬åœ°åŒ–

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

#### ç®¡ç†ç«¯ç¯å¢ƒè¦æ±‚ (è¿è¡Œ Web ç•Œé¢ æ‚¨å¯ä½¿ç”¨1panelæ¥å¿«æ·éƒ¨ç½²)
- **Python**: 3.13+ (æ¨è 3.13 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ”¯æŒ Python 3.14)
- **MySQL**: 8.0+
- **Redis**: 7.0+


#### ç›®æ ‡æœåŠ¡å™¨ (çº¯å‡€å¼€æ”¾SSHçš„ç³»ç»Ÿ ä»…è¿è¡Œ CS2 ä¸éœ€è¦å®‰è£…ç®¡ç†ç«¯)
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 24.04+


### ğŸš€ å¿«é€Ÿå¼€å§‹

#### æ­¥éª¤ 1: å‡†å¤‡æœåŠ¡å™¨ ä¸€å° Webç®¡ç†ç«¯(é€šå¸¸1æ ¸1Gä¹Ÿå¤Ÿç”¨äº†) + ä¸€å°æ¸¸æˆæœåŠ¡å™¨ (æ¨è,å½“ç„¶ä½ ä¹Ÿå¯ä»¥éƒ¨ç½²åˆ°ä¸€èµ·)

#### æ­¥éª¤ 2: å…‹éš†ä»“åº“ æˆ– ä¸‹è½½æ•´ä¸ªæºç 

```bash
git clone https://github.com/e54385991/CS2-ServerManager.git
cd CS2-ServerManager
```


#### æ­¥éª¤ 3: æ–¹æ¡ˆæ‰‹åŠ¨éƒ¨ç½² å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

#### æ­¥éª¤ 4: é…ç½®æ•°æ®åº“å’Œ Redis

ç¼–è¾‘ `modules/config.py` æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„æ•°æ®åº“å’Œ Redis æœåŠ¡å™¨è¿æ¥ä¿¡æ¯ã€‚

**âš ï¸ é‡è¦æç¤º**: æ•°æ®åº“å’Œ Redis é…ç½®æ˜¯å¿…éœ€çš„ï¼Œä¸å¯çœç•¥ï¼

**ğŸ”¥ Redis æ— å¯†ç ç‰¹åˆ«è¯´æ˜**  
å¦‚æœä½ çš„ Redis æœåŠ¡å™¨**æ²¡æœ‰è®¾ç½®å¯†ç **ï¼Œè¯·åŠ¡å¿…è¿™æ ·é…ç½®ï¼ˆå¦åˆ™ä¼šæŠ¥é”™ï¼‰ï¼š

```python
REDIS_PASSWORD: Optional[str] = None   # æ²¡æœ‰å¯†ç å°±å†™ Noneï¼Œä¸è¦å†™ç©ºå­—ç¬¦ä¸² "" 
```

##### ä½¿ç”¨ 1Panel éƒ¨ç½²ç¤ºä¾‹

å¦‚æœæ‚¨ä½¿ç”¨ 1Panel éƒ¨ç½² MySQL å’Œ Redisï¼Œå‚è€ƒé…ç½®å¦‚ä¸‹ï¼š

![1Panel éƒ¨ç½²ç¤ºä¾‹](images/1panel.png)

```python
# MySQL Configuration
MYSQL_HOST: str = "1Panel-mysql-KZBC"  # æ‚¨çš„ MySQL å®¹å™¨åæˆ–åœ°å€
MYSQL_PORT: int = 3306
MYSQL_USER: str = "cs2_manager"
MYSQL_PASSWORD: str = "password"  # ä¿®æ”¹ä¸ºæ‚¨çš„å¯†ç 
MYSQL_DATABASE: str = "cs2_manager"

# Redis Configuration
REDIS_HOST: str = "1Panel-redis-oAZc"  # æ‚¨çš„ Redis å®¹å™¨åæˆ–åœ°å€
REDIS_PORT: int = 6379
REDIS_PASSWORD: Optional[str] = "redis_rYpBai"  # ä¿®æ”¹ä¸ºæ‚¨çš„å¯†ç 
REDIS_DB: int = 0

# Security
SECRET_KEY: str = "your-secret-key-change-this-in-production"  # è‡³å°‘ 32 ä½ï¼Œå»ºè®®éšæœºç”Ÿæˆ
JWT_SECRET_KEY: str = "your-jwt-secret-key-change-this-in-production"  # è‡³å°‘ 32 ä½ï¼Œå»ºè®®éšæœºç”Ÿæˆ
```

#### æ­¥éª¤ 5: å¯åŠ¨æœåŠ¡

ä½¿ç”¨ uvicorn å¯åŠ¨åº”ç”¨ï¼š

```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

#### æ­¥éª¤ 6: è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ä»¥ä¸‹åœ°å€ï¼š

- **Web ç•Œé¢**: http://localhost:8000/
  - ä¸»é¡µï¼šåŠŸèƒ½ä»‹ç»å’Œå¿«é€Ÿå¯¼èˆª
  - ç™»å½•/æ³¨å†Œï¼šhttp://localhost:8000/login æˆ– http://localhost:8000/register
  - æœåŠ¡å™¨ç®¡ç†ï¼šhttp://localhost:8000/servers-ui (éœ€è¦ç™»å½•)
  
- **API æ–‡æ¡£**: 
  - Swagger UI: http://localhost:8000/docs
  - ReDoc: http://localhost:8000/redoc

#### æ­¥éª¤ 7: é¦–æ¬¡ç™»å½•

é¦–æ¬¡å¯åŠ¨åº”ç”¨æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼š

```
ç”¨æˆ·å: admin
å¯†ç : admin123
```

**âš ï¸ å®‰å…¨æç¤º**: è¯·åœ¨é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

---

<a name="english"></a>
## ğŸ“– English

### Introduction

A modern CS2 (Counter-Strike 2) server manager built with **FastAPI + Redis + MySQL**. Manage multiple servers remotely via SSH with features like one-click deployment, start/stop controls, and more. Making server management simple and efficient!

### âœ¨ Key Features

- âœ… **Async Architecture**: High-performance async operations using async/await
- ğŸš€ **Multi-Server Management**: Manage multiple CS2 servers simultaneously
- ğŸ‘¥ **User Authentication**: JWT token authentication, users can only manage their own servers
- ğŸ”‘ **API Key Authentication**: Support API key authentication for controlling servers without password exchange ([View Docs](docs/API_KEY_USAGE.md))
- ğŸ” **SSH Connection**: Supports both password and key file authentication
- ğŸ“¦ **Auto Deployment**: Automatic CS2 server deployment via SSH
- ğŸ® **Server Control**: Start, stop, and restart servers
- ğŸ”„ **Auto-Restart Protection**: Automatic restart on crash with crash loop protection ([View Docs](docs/AUTO_RESTART_GUIDE.md))
- ğŸ”” **Real-time Status Reporting**: Servers report crash and restart events to the manager via API
- ğŸ”Œ **Plugin Framework Installation**: One-click install for Metamod:Source and CounterStrikeSharp, supports batch install and update
- ğŸ“Š **Status Monitoring**: Real-time server status monitoring
- ğŸ”´ **WebSocket Real-time Updates**: Live SSH status and output during deployment
- ğŸ’¾ **Redis Caching**: Server status caching with Redis
- ğŸ“ **Operation Logs**: Records all deployment and operation history
- ğŸ³ **Docker Support**: Docker Compose for quick dependency deployment
- ğŸ¨ **Modern Web Interface**: Responsive UI based on Bootstrap 5 + Alpine.js, all resources fully localized

### ğŸ“‹ System Requirements

#### Manager Host (Running Web Interface)
- **Python**: 3.13+ (Recommended 3.13 or higher, supports Python 3.14)
- **MySQL**: 8.0+
- **Redis**: 7.0+

#### Target Server (Running CS2)
- **Operating System**: Ubuntu 24.04+

### ğŸš€ Quick Start

#### Step 1: Prepare Server

For detailed server preparation instructions, please refer to [DEPLOYMENT.md](docs/DEPLOYMENT.md).

#### Step 2: Clone Repository

```bash
git clone https://github.com/e54385991/CS2-ServerManager.git
cd CS2-ServerManager
```

#### Step 3: Install Dependencies

```bash
pip install -r requirements.txt
```

#### Step 4: Configure Database and Redis

Edit the `modules/config.py` file to configure the necessary database and Redis server connection information.


**ğŸ”¥ Special Note for Redis WITHOUT Password**  
If your Redis server has **no password set**, you **must** configure it like this (otherwise it will error):

```python
REDIS_PASSWORD: Optional[str] = None   # No password â†’ use None, NOT an empty string ""
```


**âš ï¸ Important**: Database and Redis configuration are required and cannot be omitted!

##### Example Deployment with 1Panel

If you're using 1Panel to deploy MySQL and Redis, refer to the configuration below:

![1Panel Deployment Example](images/1panel.png)

```python
# MySQL Configuration
MYSQL_HOST: str = "1Panel-mysql-KZBC"  # Your MySQL container name or address
MYSQL_PORT: int = 3306
MYSQL_USER: str = "cs2_manager"
MYSQL_PASSWORD: str = "password"  # Change to your password
MYSQL_DATABASE: str = "cs2_manager"

# Redis Configuration
REDIS_HOST: str = "1Panel-redis-oAZc"  # Your Redis container name or address
REDIS_PORT: int = 6379
REDIS_PASSWORD: Optional[str] = "redis_rYpBai"  # Change to your password
REDIS_DB: int = 0

# Security
SECRET_KEY: str = "your-secret-key-change-this-in-production"  # At least 32 characters, randomly generated recommended
JWT_SECRET_KEY: str = "your-jwt-secret-key-change-this-in-production"  # At least 32 characters, randomly generated recommended
```

#### Step 5: Start Service

Start the application using uvicorn:

```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

#### Step 6: Access Application

Open your browser and visit:

- **Web Interface**: http://localhost:8000/
  - Homepage: Feature introduction and quick navigation
  - Login/Register: http://localhost:8000/login or http://localhost:8000/register
  - Server Management: http://localhost:8000/servers-ui (login required)
  
- **API Documentation**: 
  - Swagger UI: http://localhost:8000/docs
  - ReDoc: http://localhost:8000/redoc

#### Step 7: First Login

On first startup, the system automatically creates a default admin account:

```
Username: admin
Password: admin123
```

**âš ï¸ Security Notice**: Please change the default password immediately after first login!

---

### ğŸ“„ License

MIT License

### ğŸ’¬ Support

If you have any questions, please create an Issue or contact the maintainer.
