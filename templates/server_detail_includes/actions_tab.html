                <div class="tab-pane fade" id="actions" role="tabpanel">
                    <!-- Deployment Lock Warning (shown when deployment is stuck) -->
                    <div x-show="deploymentLockExists" class="alert alert-info alert-dismissible fade show" role="alert">
                        <i class="bi bi-info-circle-fill"></i>
                        <strong data-i18n="serverDetail.deploymentLockDetected">检测到 SteamCMD 正在运行</strong>
                        <p class="mb-2" data-i18n="serverDetail.deploymentLockMessage">服务器可能正在更新或部署。如果长时间卡住，您可以尝试清除锁定并重新开始。通常无需操作。</p>
                        <button @click="cancelDeployment()" :disabled="cancellingDeployment" class="btn btn-sm btn-outline-danger">
                            <span x-show="!cancellingDeployment">
                                <i class="bi bi-x-circle"></i> <span data-i18n="serverDetail.clearDeploymentLock">清除部署锁定</span>
                            </span>
                            <span x-show="cancellingDeployment">
                                <i class="bi bi-arrow-repeat spin"></i> <span data-i18n="serverDetail.clearing">清除中...</span>
                            </span>
                        </button>
                    </div>
                    
                    <!-- Actions Card -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-gear"></i> <span
                                    data-i18n="serverDetail.serverActions">Server Actions</span></h5>
                        </div>
                        <div class="card-body">
                            <div class="action-buttons">
                                <button @click="executeAction('deploy')" :disabled="isActionRunning"
                                    class="btn btn-primary">
                                    <i class="bi bi-cloud-download"></i> <span
                                        data-i18n="serverDetail.deployServer">Deploy Server</span>
                                </button>
                                <button @click="executeAction('start')" :disabled="isActionRunning"
                                    class="btn btn-success">
                                    <i class="bi bi-play-circle"></i> <span data-i18n="serverDetail.start">Start</span>
                                </button>
                                <button @click="executeAction('stop')" :disabled="isActionRunning"
                                    class="btn btn-danger">
                                    <i class="bi bi-stop-circle"></i> <span data-i18n="serverDetail.stop">Stop</span>
                                </button>
                                <button @click="executeAction('restart')" :disabled="isActionRunning"
                                    class="btn btn-warning">
                                    <i class="bi bi-arrow-clockwise"></i> <span
                                        data-i18n="serverDetail.restart">Restart</span>
                                </button>
                                <button @click="executeAction('update')" :disabled="isActionRunning"
                                    class="btn btn-secondary">
                                    <i class="bi bi-arrow-up-circle"></i> <span
                                        data-i18n="serverDetail.update">Update</span>
                                </button>
                                <button @click="executeAction('validate')" :disabled="isActionRunning"
                                    class="btn btn-outline-secondary">
                                    <i class="bi bi-shield-check"></i> <span
                                        data-i18n="serverDetail.updateValidate">Update + Validate</span>
                                </button>
                                <button @click="executeAction('status')" :disabled="isActionRunning"
                                    class="btn btn-info">
                                    <i class="bi bi-question-circle"></i> <span
                                        data-i18n="serverDetail.checkStatus">Check Status</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Plugin Management Card -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-plugin"></i> <span
                                    data-i18n="serverDetail.pluginFrameworkManagement">Plugin Framework
                                    Management</span></h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <i class="bi bi-info-circle"></i> Install plugin frameworks to enable server
                                modifications and custom plugins.
                            </p>

                            <!-- Multi-select Installation -->
                            <div class="card bg-light mb-3">
                                <div class="card-body">
                                    <h6 class="card-title mb-3"><i class="bi bi-ui-checks"></i> <span
                                            data-i18n="serverDetail.batchInstallation">Batch Installation</span></h6>
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox"
                                                    x-model="pluginSelection.metamod" id="selectMetamod">
                                                <label class="form-check-label" for="selectMetamod">
                                                    <strong>Metamod:Source</strong>
                                                    <small class="d-block text-muted">Plugin loader for Source 2
                                                        engine</small>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox"
                                                    x-model="pluginSelection.counterstrikesharp" id="selectCSS">
                                                <label class="form-check-label" for="selectCSS">
                                                    <strong>CounterStrikeSharp</strong>
                                                    <small class="d-block text-muted">Write CS2 plugins in C#</small>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox"
                                                    x-model="pluginSelection.cs2fixes" id="selectCS2Fixes">
                                                <label class="form-check-label" for="selectCS2Fixes">
                                                    <strong>CS2Fixes</strong>
                                                    <small class="d-block text-muted">Essential fixes and features</small>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-grid">
                                        <button @click="installSelectedPlugins()"
                                            :disabled="isActionRunning || (!pluginSelection.metamod && !pluginSelection.counterstrikesharp && !pluginSelection.cs2fixes)"
                                            class="btn btn-success">
                                            <i class="bi bi-cloud-download"></i> <span
                                                data-i18n="serverDetail.installSelectedFrameworks">Install Selected
                                                Frameworks</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Individual Plugin Cards -->
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <div class="card h-100 border">
                                        <div class="card-body">
                                            <h6 class="card-title"><i class="bi bi-box-seam"></i> Metamod:Source</h6>
                                            <p class="card-text small text-muted">
                                                Plugin loader for Source 2 engine. Required for most CS2 plugins.
                                            </p>
                                            <div class="d-grid gap-2">
                                                <button @click="executeAction('install_metamod')"
                                                    :disabled="isActionRunning" class="btn btn-primary btn-sm">
                                                    <i class="bi bi-download"></i> <span
                                                        data-i18n="serverDetail.install">Install</span>
                                                </button>
                                                <button @click="executeAction('update_metamod')"
                                                    :disabled="isActionRunning" class="btn btn-outline-primary btn-sm">
                                                    <i class="bi bi-arrow-repeat"></i> <span
                                                        data-i18n="serverDetail.update">Update</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card h-100 border">
                                        <div class="card-body">
                                            <h6 class="card-title"><i class="bi bi-box-seam"></i> CounterStrikeSharp
                                            </h6>
                                            <p class="card-text small text-muted">
                                                Write CS2 server plugins in C#. Requires Metamod:Source.
                                            </p>
                                            <div class="d-grid gap-2">
                                                <button @click="executeAction('install_counterstrikesharp')"
                                                    :disabled="isActionRunning" class="btn btn-primary btn-sm">
                                                    <i class="bi bi-download"></i> <span
                                                        data-i18n="serverDetail.install">Install</span>
                                                </button>
                                                <button @click="executeAction('update_counterstrikesharp')"
                                                    :disabled="isActionRunning" class="btn btn-outline-primary btn-sm">
                                                    <i class="bi bi-arrow-repeat"></i> <span
                                                        data-i18n="serverDetail.update">Update</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card h-100 border">
                                        <div class="card-body">
                                            <h6 class="card-title"><i class="bi bi-box-seam"></i> CS2Fixes</h6>
                                            <p class="card-text small text-muted">
                                                Essential bug fixes and features for CS2. Requires Metamod:Source.
                                            </p>
                                            <div class="d-grid gap-2">
                                                <button @click="executeAction('install_cs2fixes')"
                                                    :disabled="isActionRunning" class="btn btn-primary btn-sm">
                                                    <i class="bi bi-download"></i> <span
                                                        data-i18n="serverDetail.install">Install</span>
                                                </button>
                                                <button @click="executeAction('update_cs2fixes')"
                                                    :disabled="isActionRunning" class="btn btn-outline-primary btn-sm">
                                                    <i class="bi bi-arrow-repeat"></i> <span
                                                        data-i18n="serverDetail.update">Update</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <small class="text-muted">
                                    <i class="bi bi-lightbulb"></i> <strong>Tip:</strong> After installing plugins,
                                    restart your server for changes to take effect.
                                    Use console commands <code>meta list</code> and <code>css_plugins list</code> to
                                    verify installation.
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- GitHub Plugin Install Card -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-github"></i> <span
                                    data-i18n="serverDetail.githubPluginInstall">GitHub Plugin Install</span></h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <i class="bi bi-info-circle"></i> <span data-i18n="serverDetail.githubPluginInstallDesc">Install plugins directly from GitHub releases. Supports CS2Fixes, MultiAddonManager, and other CS2 plugins.</span>
                            </p>
                            
                            <!-- GitHub URL Input -->
                            <div class="mb-3">
                                <label class="form-label"><span data-i18n="serverDetail.githubRepoUrl">GitHub Repository URL</span></label>
                                <div class="input-group">
                                    <input type="text" class="form-control" x-model="githubRepoUrl"
                                        placeholder="https://github.com/Source2ZE/CS2Fixes"
                                        data-i18n-placeholder="serverDetail.githubRepoUrlPlaceholder">
                                    <button class="btn btn-primary" @click="fetchGitHubReleases()" :disabled="githubFetching || !githubRepoUrl">
                                        <span x-show="!githubFetching"><i class="bi bi-search"></i> <span data-i18n="serverDetail.fetchReleases">Fetch Releases</span></span>
                                        <span x-show="githubFetching"><i class="bi bi-arrow-repeat spin"></i> <span data-i18n="serverDetail.fetching">Fetching...</span></span>
                                    </button>
                                </div>
                                <small class="text-muted">
                                    <i class="bi bi-lightbulb"></i> Examples: CS2Fixes, MultiAddonManager, CounterStrikeSharp plugins
                                </small>
                            </div>
                            
                            <!-- Releases List -->
                            <div x-show="githubReleases.length > 0" class="mb-3">
                                <label class="form-label"><span data-i18n="serverDetail.selectRelease">Select Release</span></label>
                                <select class="form-select" x-model="selectedReleaseIndex" @change="onReleaseSelected()">
                                    <option value="">-- <span data-i18n="serverDetail.selectRelease">Select Release</span> --</option>
                                    <template x-for="(release, index) in githubReleases" :key="index">
                                        <option :value="index" x-text="release.tag_name + (release.name ? ' - ' + release.name : '') + (release.prerelease ? ' (Pre-release)' : '')"></option>
                                    </template>
                                </select>
                            </div>
                            
                            <!-- Assets List -->
                            <div x-show="selectedReleaseIndex !== '' && githubReleases[selectedReleaseIndex]?.assets?.length > 0" class="mb-3">
                                <label class="form-label"><span data-i18n="serverDetail.selectAsset">Select Asset</span></label>
                                <div class="list-group">
                                    <template x-for="(asset, index) in (githubReleases[selectedReleaseIndex]?.assets || [])" :key="index">
                                        <label class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                                            :class="{ 'active': selectedAssetIndex === index }">
                                            <div>
                                                <input type="radio" class="form-check-input me-2" 
                                                    :name="'asset_' + server.id" 
                                                    :value="index"
                                                    x-model="selectedAssetIndex">
                                                <span x-text="asset.name"></span>
                                                <span class="badge bg-warning ms-2" x-show="asset.name.toLowerCase().includes('linux')">Linux</span>
                                                <span class="badge bg-info ms-2" x-show="asset.name.toLowerCase().includes('windows')">Windows</span>
                                            </div>
                                            <small class="text-muted" x-text="formatFileSize(asset.size)"></small>
                                        </label>
                                    </template>
                                </div>
                            </div>
                            
                            <!-- Installation Options -->
                            <div x-show="selectedAssetIndex !== ''" class="mb-3">
                                <label class="form-label"><span data-i18n="serverDetail.installOptions">Installation Options</span></label>
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <!-- Show current proxy mode -->
                                        <div class="mb-3">
                                            <div class="alert" :class="server.use_panel_proxy ? 'alert-success' : (server.github_proxy ? 'alert-info' : 'alert-secondary')">
                                                <i class="bi bi-info-circle"></i>
                                                <strong data-i18n="serverDetail.downloadMode">Download Mode:</strong>
                                                <span x-show="server.use_panel_proxy" data-i18n="serverDetail.usingPanelProxy">Panel Server Proxy (configured in Settings)</span>
                                                <span x-show="!server.use_panel_proxy && server.github_proxy">
                                                    <span data-i18n="serverDetail.usingGithubProxy">GitHub URL Proxy:</span> <code x-text="server.github_proxy"></code>
                                                </span>
                                                <span x-show="!server.use_panel_proxy && !server.github_proxy" data-i18n="serverDetail.usingDirect">Direct Connection</span>
                                            </div>
                                        </div>
                                        
                                        <!-- Exclude Directories - with Analyze button -->
                                        <div class="mb-2">
                                            <label class="form-label small mb-1">
                                                <span data-i18n="serverDetail.excludeDirectories">Exclude Directories (for Updates)</span>
                                            </label>
                                            <small class="text-muted d-block mb-2" data-i18n="serverDetail.excludeDirectoriesHint">Directories to skip during extraction (e.g., configs you want to keep)</small>
                                            
                                            <!-- Analyze Archive Button -->
                                            <button class="btn btn-sm btn-outline-info mb-2" @click="analyzeGitHubArchive()" :disabled="githubAnalyzing">
                                                <span x-show="!githubAnalyzing"><i class="bi bi-folder-check"></i> <span data-i18n="serverDetail.analyzeArchive">Analyze Archive</span></span>
                                                <span x-show="githubAnalyzing"><i class="bi bi-arrow-repeat spin"></i> <span data-i18n="serverDetail.analyzing">Analyzing...</span></span>
                                            </button>
                                            
                                            <!-- Archive Analysis Progress -->
                                            <div x-show="githubAnalyzing" class="mb-2">
                                                <div class="progress" style="height: 20px;">
                                                    <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                                        role="progressbar" 
                                                        style="width: 100%">
                                                        <span data-i18n="serverDetail.downloadingArchive">Downloading and analyzing...</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Exclusion Mode Toggle -->
                                            <div x-show="(githubArchiveDirs.length > 0 || githubArchiveFiles.length > 0)" class="mb-2">
                                                <label class="form-label fw-bold small">
                                                    <span data-i18n="serverDetail.exclusionMode">Exclusion Mode:</span>
                                                </label>
                                                <div class="btn-group w-100" role="group">
                                                    <input type="radio" class="btn-check" name="github-exclusion-mode" id="github-exclusion-mode-dir" value="directory" x-model="githubExclusionMode">
                                                    <label class="btn btn-outline-primary btn-sm" for="github-exclusion-mode-dir">
                                                        <i class="bi bi-folder"></i> <span data-i18n="serverDetail.byDirectory">By Directory</span>
                                                    </label>
                                                    
                                                    <input type="radio" class="btn-check" name="github-exclusion-mode" id="github-exclusion-mode-file" value="file" x-model="githubExclusionMode">
                                                    <label class="btn btn-outline-primary btn-sm" for="github-exclusion-mode-file">
                                                        <i class="bi bi-file-earmark"></i> <span data-i18n="serverDetail.byFile">By File</span>
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <!-- Directory Selection from Archive -->
                                            <div x-show="githubArchiveDirs.length > 0 && githubExclusionMode === 'directory'" class="mb-2">
                                                <small class="text-muted d-block mb-1" data-i18n="serverDetail.selectDirsToExclude">Select directories to exclude:</small>
                                                <div class="border rounded p-2" style="max-height: 150px; overflow-y: auto;">
                                                    <template x-for="(dir, idx) in githubArchiveDirs" :key="idx">
                                                        <div class="form-check form-check-sm">
                                                            <input class="form-check-input" type="checkbox" 
                                                                :id="'exclude_dir_' + idx"
                                                                :checked="githubExcludeDirs.includes(dir)"
                                                                @change="toggleExcludeDir(dir)">
                                                            <label class="form-check-label small" :for="'exclude_dir_' + idx">
                                                                <i class="bi bi-folder me-1"></i><span x-text="dir"></span>
                                                            </label>
                                                        </div>
                                                    </template>
                                                </div>
                                            </div>
                                            
                                            <!-- File Selection from Archive -->
                                            <div x-show="githubArchiveFiles.length > 0 && githubExclusionMode === 'file'" class="mb-2">
                                                <small class="text-muted d-block mb-1" data-i18n="serverDetail.selectFilesToExclude">Select files to exclude:</small>
                                                <div class="border rounded p-2" style="max-height: 150px; overflow-y: auto;">
                                                    <template x-for="(file, idx) in githubArchiveFiles" :key="idx">
                                                        <div class="form-check form-check-sm">
                                                            <input class="form-check-input" type="checkbox" 
                                                                :id="'exclude_file_' + idx"
                                                                :checked="githubExcludeFiles.includes(file.path)"
                                                                @change="toggleExcludeFile(file.path)">
                                                            <label class="form-check-label small" :for="'exclude_file_' + idx">
                                                                <i class="bi bi-file-earmark me-1"></i>
                                                                <span x-text="file.path"></span>
                                                                <span x-show="file.size > 0" class="text-muted" x-text="' (' + formatFileSize(file.size) + ')'"></span>
                                                            </label>
                                                        </div>
                                                    </template>
                                                </div>
                                            </div>
                                            
                                            <!-- Selected exclusions -->
                                            <div x-show="githubExcludeDirs.length > 0 || githubExcludeFiles.length > 0" class="mt-2">
                                                <small class="text-muted" data-i18n="serverDetail.selectedExclusions">Selected exclusions:</small>
                                                <div class="mt-1">
                                                    <template x-for="(dir, idx) in githubExcludeDirs" :key="'dir-' + idx">
                                                        <span class="badge bg-warning text-dark me-1 mb-1">
                                                            <i class="bi bi-folder-x"></i> <span x-text="dir"></span>
                                                            <button type="button" class="btn-close btn-close-dark ms-1" style="font-size: 0.5em;" @click="removeExcludeDir(idx)"></button>
                                                        </span>
                                                    </template>
                                                    <template x-for="(file, idx) in githubExcludeFiles" :key="'file-' + idx">
                                                        <span class="badge bg-info text-dark me-1 mb-1">
                                                            <i class="bi bi-file-earmark-x"></i> <span x-text="file"></span>
                                                            <button type="button" class="btn-close btn-close-dark ms-1" style="font-size: 0.5em;" @click="removeExcludeFile(idx)"></button>
                                                        </span>
                                                    </template>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Install Button -->
                            <div x-show="selectedAssetIndex !== ''" class="d-grid gap-2">
                                <button class="btn btn-success" @click="installGitHubPlugin()" :disabled="githubInstalling || isActionRunning">
                                    <span x-show="!githubInstalling">
                                        <i class="bi bi-download"></i> <span data-i18n="serverDetail.installPlugin">Install Plugin</span>
                                    </span>
                                    <span x-show="githubInstalling">
                                        <i class="bi bi-arrow-repeat spin"></i> <span data-i18n="serverDetail.installing">Installing...</span>
                                    </span>
                                </button>
                            </div>
                            
                            <!-- Uninstall Button -->
                            <div class="d-grid gap-2 mt-2">
                                <button class="btn btn-danger" @click="showGitHubUninstallModal()" :disabled="isActionRunning">
                                    <i class="bi bi-trash"></i> <span data-i18n="githubPlugins.uninstallButton">Uninstall Plugin</span>
                                </button>
                            </div>
                            
                            <!-- Error Message -->
                            <div x-show="githubError" class="alert alert-danger mt-3" x-text="githubError"></div>
                            
                            <!-- No Releases Message -->
                            <div x-show="githubNoReleases" class="alert alert-warning mt-3">
                                <i class="bi bi-exclamation-triangle"></i> <span data-i18n="serverDetail.noReleases">No releases found for this repository</span>
                            </div>
                        </div>
                    </div>

                    <!-- Plugin Backup Card -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-archive"></i> <span
                                    data-i18n="serverDetail.pluginBackup">Plugin Backup</span></h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <i class="bi bi-info-circle"></i> Backup your plugin files for disaster recovery and rollback.
                            </p>
                            <div class="alert alert-info">
                                <small>
                                    <strong><i class="bi bi-box-seam"></i> What will be backed up:</strong><br>
                                    • <code>addons/</code> folder - All installed plugins<br>
                                    • <code>cfg/</code> folder - Configuration files<br>
                                    • <code>gameinfo.gi</code> file - Game configuration<br>
                                    <br>
                                    <strong><i class="bi bi-folder"></i> Backup location:</strong><br>
                                    <code x-text="getBackupPath()"></code>
                                </small>
                            </div>
                            <div class="d-grid">
                                <button @click="executeBackupPlugins()" :disabled="isActionRunning"
                                    class="btn btn-warning">
                                    <i class="bi bi-archive"></i> <span data-i18n="serverDetail.backupPlugins">Backup Plugins</span>
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
